<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Forest Typing Academy - Home</title>
  <link rel="icon" type="image/png" href="images/favicon.png">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  
  <style>
    .typing-container {
      max-width: 1200px;
      margin: 200px auto 40px;
      padding: 20px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(44, 95, 45, 0.1);
    }

    .login-section {
      text-align: center;
      padding: 40px 20px;
    }

    .login-form {
      max-width: 400px;
      margin: 0 auto;
      background: var(--background-color);
      padding: 30px;
      border-radius: 8px;
      border: 2px solid var(--deep-forest-green);
    }

    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: var(--deep-forest-green);
      font-weight: bold;
    }

    .form-group input {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--soft-bark-gray);
      border-radius: 5px;
      font-size: 16px;
      box-sizing: border-box;
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--deep-forest-green);
    }

    .dashboard {
      display: none;
    }

    .welcome-header {
      text-align: center;
      margin-bottom: 40px;
      padding: 30px;
      background: linear-gradient(135deg, var(--deep-forest-green), var(--muted-golden-amber));
      color: white;
      border-radius: 10px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: var(--background-color);
      padding: 25px;
      border-radius: 8px;
      border: 2px solid var(--deep-forest-green);
      text-align: center;
    }

    .stat-value {
      font-size: 36px;
      font-weight: bold;
      color: var(--deep-forest-green);
      margin-bottom: 10px;
    }

    .stat-label {
      font-size: 14px;
      color: var(--text-color);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .progress-section {
      background: var(--background-color);
      padding: 25px;
      border-radius: 8px;
      border: 2px solid var(--deep-forest-green);
      margin-bottom: 30px;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background: var(--soft-bark-gray);
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--deep-forest-green), var(--muted-golden-amber));
      transition: width 0.3s ease;
    }

    .achievements-section {
      background: var(--background-color);
      padding: 25px;
      border-radius: 8px;
      border: 2px solid var(--deep-forest-green);
      margin-bottom: 30px;
    }

    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .achievement-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      border: 2px solid var(--soft-bark-gray);
      text-align: center;
      transition: all 0.3s ease;
    }

    .achievement-card.earned {
      border-color: var(--muted-golden-amber);
      background: linear-gradient(135deg, #fff, #f0f8ff);
      transform: scale(1.05);
    }

    .achievement-icon {
      font-size: 32px;
      margin-bottom: 15px;
    }

    .achievement-card.earned .achievement-icon {
      color: var(--muted-golden-amber);
    }

    .navigation-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    .nav-btn {
      padding: 15px 30px;
      background: var(--deep-forest-green);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .nav-btn:hover {
      background: var(--muted-golden-amber);
      transform: translateY(-2px);
    }

    .recent-activity {
      background: var(--background-color);
      padding: 25px;
      border-radius: 8px;
      border: 2px solid var(--deep-forest-green);
      margin-bottom: 30px;
    }

    .activity-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid var(--soft-bark-gray);
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-text {
      color: var(--text-color);
    }

    .activity-date {
      color: var(--soft-bark-gray);
      font-size: 12px;
    }

    @media (max-width: 768px) {
      .typing-container {
        margin: 150px auto 20px;
        padding: 15px;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
      
      .navigation-buttons {
        flex-direction: column;
      }
      
      .achievements-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Contact Header -->
  <div class="contact-header">
    <a href="tel:250-555-0123"><i class="fas fa-phone"></i> 250-555-0123</a>
    <a href="mailto:info@carpetreeem.ca"><i class="fas fa-envelope"></i> info@carpetreeem.ca</a>
    <a href="lets-talk.html"><i class="fas fa-comments"></i> Get a Quote</a>
  </div>

  <!-- Navigation -->
  <nav>
    <div class="nav-container">
      <div class="nav-logo">
        <a href="index.html">
          <img src="images/logo.png" alt="Carpe Tree'em Logo" class="nav-logo-img">
        </a>
      </div>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="services.html">Services</a>
        <a href="root-knowledge.html">Root Knowledge</a>
        <a href="lets-talk.html">Contact</a>
        <a href="typing-home.html">Typing Academy</a>
      </div>
    </div>
  </nav>

  <div class="typing-container">
    <!-- Login Section -->
    <div id="loginSection" class="login-section">
      <h1><i class="fas fa-tree"></i> Forest Typing Academy</h1>
      <p>Master typing while exploring the wonders of nature! Track your progress and earn achievements.</p>
      
      <div class="login-form">
        <h2>Welcome Back, Forest Friend!</h2>
        <form id="loginForm">
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" name="username" required>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" name="password" required>
          </div>
          <button type="submit" class="cta-button">Login</button>
        </form>
        
        <hr style="margin: 20px 0; border: 1px solid var(--soft-bark-gray);">
        
        <h3>New to the Forest?</h3>
        <form id="signupForm">
          <div class="form-group">
            <label for="newUsername">Choose Username</label>
            <input type="text" id="newUsername" name="newUsername" required>
          </div>
          <div class="form-group">
            <label for="newPassword">Choose Password</label>
            <input type="password" id="newPassword" name="newPassword" required>
          </div>
          <button type="submit" class="cta-button">Create Account</button>
        </form>
      </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard" class="dashboard">
      <div class="welcome-header">
        <h1>Welcome back, <span id="userDisplayName"></span>! <i class="fas fa-leaf"></i></h1>
        <p>Your typing journey continues in the Forest Typing Academy</p>
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="wpmDisplay">0</div>
          <div class="stat-label">Best WPM</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="accuracyDisplay">0%</div>
          <div class="stat-label">Best Accuracy</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="streakDisplay">0</div>
          <div class="stat-label">Day Streak</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="lessonsCompleted">0</div>
          <div class="stat-label">Lessons Completed</div>
        </div>
      </div>

      <!-- Progress Section -->
      <div class="progress-section">
        <h3><i class="fas fa-chart-line"></i> Your Progress</h3>
        <p>Course Completion: <span id="courseProgress">0%</span></p>
        <div class="progress-bar">
          <div class="progress-fill" id="courseProgressFill" style="width: 0%"></div>
        </div>
        <p>Next Lesson: <span id="nextLesson">Lesson 1</span></p>
      </div>

      <!-- Recent Activity -->
      <div class="recent-activity">
        <h3><i class="fas fa-history"></i> Recent Activity</h3>
        <div id="activityList">
          <div class="activity-item">
            <span class="activity-text">Welcome to Forest Typing Academy!</span>
            <span class="activity-date">Just now</span>
          </div>
        </div>
      </div>

      <!-- Achievements Section -->
      <div class="achievements-section">
        <h3><i class="fas fa-trophy"></i> Your Achievements</h3>
        <div class="achievements-grid" id="achievementsGrid">
          <!-- Achievements will be populated by JavaScript -->
        </div>
      </div>

      <!-- Navigation Buttons -->
      <div class="navigation-buttons">
        <a href="typing-lessons.html" class="nav-btn">
          <i class="fas fa-graduation-cap"></i>
          Start Lessons
        </a>
        <a href="typing-games.html" class="nav-btn">
          <i class="fas fa-gamepad"></i>
          Play Games
        </a>
        <button onclick="logout()" class="nav-btn">
          <i class="fas fa-sign-out-alt"></i>
          Logout
        </button>
      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2024 Carpe Tree'em. Professional tree care services.</p>
  </footer>

  <script>
    // User data structure
    let currentUser = null;
    let userData = null;

    // Achievements
    const achievements = [
      { id: 'first-lesson', name: 'Forest Guardian', icon: 'üå≤', description: 'Complete your first lesson' },
      { id: 'lesson-5', name: 'Home Row Hero', icon: 'üè†', description: 'Complete the first 5 lessons (Home Row mastery)' },
      { id: 'lesson-10', name: 'Top Row Explorer', icon: 'üîù', description: 'Complete lessons 1-10 (Top and Bottom rows)' },
      { id: 'lesson-15', name: 'Word Weaver', icon: 'üìù', description: 'Complete lessons 1-15 (Words and sentences)' },
      { id: 'lesson-20', name: 'Forest Master', icon: 'üëë', description: 'Complete all 20 lessons' },
      { id: 'wpm-20', name: 'Eagle Ace', icon: 'ü¶Ö', description: 'Reach 20 WPM' },
      { id: 'wpm-40', name: 'Swift Deer', icon: 'ü¶å', description: 'Reach 40 WPM' },
      { id: 'wpm-60', name: 'Lightning Lynx', icon: 'üêÜ', description: 'Reach 60 WPM' },
      { id: 'accuracy-95', name: 'Precision Owl', icon: 'ü¶â', description: 'Achieve 95% accuracy' },
      { id: 'accuracy-98', name: 'Perfect Panther', icon: 'üêÜ', description: 'Achieve 98% accuracy' },
      { id: 'streak-7', name: 'Dedicated Beaver', icon: 'ü¶´', description: '7-day practice streak' },
      { id: 'streak-30', name: 'Forest Legend', icon: 'üå≥', description: '30-day practice streak' }
    ];

    // Initialize the dashboard
    document.addEventListener('DOMContentLoaded', function() {
      checkLoginStatus();
      setupEventListeners();
    });

    function setupEventListeners() {
      // Login form
      document.getElementById('loginForm').addEventListener('submit', handleLogin);
      document.getElementById('signupForm').addEventListener('submit', handleSignup);
    }

    function handleLogin(e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      // Check if user exists in localStorage
      const users = JSON.parse(localStorage.getItem('typingUsers') || '{}');
      
      if (users[username] && users[username].password === password) {
        loginUser(username, users[username]);
      } else {
        alert('Invalid username or password. Please try again or create a new account.');
      }
    }

    function handleSignup(e) {
      e.preventDefault();
      const username = document.getElementById('newUsername').value;
      const password = document.getElementById('newPassword').value;
      
      if (username.length < 3) {
        alert('Username must be at least 3 characters long.');
        return;
      }
      
      if (password.length < 4) {
        alert('Password must be at least 4 characters long.');
        return;
      }
      
      // Check if username already exists
      const users = JSON.parse(localStorage.getItem('typingUsers') || '{}');
      
      if (users[username]) {
        alert('Username already exists. Please choose a different one.');
        return;
      }
      
      // Create new user
      const newUser = {
        username: username,
        password: password,
        progress: {
          currentLesson: 'lesson-1',
          wpm: 0,
          accuracy: 0,
          streak: 0,
          completedLessons: [],
          weakKeys: {}
        },
        achievements: [],
        settings: {
          fingerOverlay: true,
          blankKeyboard: false
        },
        createdAt: new Date().toISOString()
      };
      
      users[username] = newUser;
      localStorage.setItem('typingUsers', JSON.stringify(users));
      
      loginUser(username, newUser);
    }

    function loginUser(username, userDataObj) {
      currentUser = username;
      userData = userDataObj;
      
      // Update display
      document.getElementById('userDisplayName').textContent = username;
      document.getElementById('loginSection').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
      
      // Load user data
      loadUserData();
      
      // Check for daily streak
      checkDailyStreak();
    }

    function logout() {
      currentUser = null;
      userData = null;
      document.getElementById('loginSection').style.display = 'block';
      document.getElementById('dashboard').style.display = 'none';
      
      // Clear forms
      document.getElementById('loginForm').reset();
      document.getElementById('signupForm').reset();
    }

    function checkLoginStatus() {
      // Check if user is already logged in (for session persistence)
      const lastUser = localStorage.getItem('lastLoggedInUser');
      if (lastUser) {
        const users = JSON.parse(localStorage.getItem('typingUsers') || '{}');
        if (users[lastUser]) {
          loginUser(lastUser, users[lastUser]);
        }
      }
    }

    function loadUserData() {
      if (!userData) return;
      
      // Update stats
      document.getElementById('wpmDisplay').textContent = userData.progress.wpm;
      document.getElementById('accuracyDisplay').textContent = userData.progress.accuracy + '%';
      document.getElementById('streakDisplay').textContent = userData.progress.streak;
      document.getElementById('lessonsCompleted').textContent = userData.progress.completedLessons.length;
      
      // Update progress
      const progressPercent = Math.round((userData.progress.completedLessons.length / 20) * 100);
      document.getElementById('courseProgress').textContent = progressPercent + '%';
      document.getElementById('courseProgressFill').style.width = progressPercent + '%';
      
      // Update next lesson
      const nextLessonNum = userData.progress.completedLessons.length + 1;
      document.getElementById('nextLesson').textContent = `Lesson ${nextLessonNum}`;
      
      // Load achievements
      loadAchievements();
    }

    function checkDailyStreak() {
      const today = new Date().toDateString();
      const lastLogin = localStorage.getItem(`lastLogin_${currentUser}`);
      
      if (lastLogin !== today) {
        const yesterday = new Date();
        yesterday.setDate(yesterday.getDate() - 1);
        const yesterdayStr = yesterday.toDateString();
        
        if (lastLogin === yesterdayStr) {
          userData.progress.streak++;
        } else {
          userData.progress.streak = 1;
        }
        
        localStorage.setItem(`lastLogin_${currentUser}`, today);
        document.getElementById('streakDisplay').textContent = userData.progress.streak;
        
        // Save progress
        saveUserProgress();
      }
    }

    function loadAchievements() {
      const grid = document.getElementById('achievementsGrid');
      grid.innerHTML = '';
      
      achievements.forEach(achievement => {
        const card = document.createElement('div');
        card.className = 'achievement-card';
        if (userData && userData.achievements.includes(achievement.id)) {
          card.classList.add('earned');
        }
        
        card.innerHTML = `
          <div class="achievement-icon">${achievement.icon}</div>
          <h4>${achievement.name}</h4>
          <p>${achievement.description}</p>
        `;
        
        grid.appendChild(card);
      });
    }

    function saveUserProgress() {
      const users = JSON.parse(localStorage.getItem('typingUsers') || '{}');
      users[currentUser] = userData;
      localStorage.setItem('typingUsers', JSON.stringify(users));
      localStorage.setItem('lastLoggedInUser', currentUser);
    }
  </script>
</body>
</html> 